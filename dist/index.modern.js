import{Controller as t}from"@hotwired/stimulus";class e{constructor(t){this.controller=t}get tabs(){return this.controller.tabs}get currentTabs(){return this.controller.currentTabs}get key(){return this.controller.storeKeyValue}load(){let t=this.constructor.load(this.key);if(!t)return;let e=new Set(t);this.tabs.forEach(t=>{let s=this.controller.findPane(t);e.has(this.controller.getPaneID(t))?this.controller.toggleClass(t,s,!0):this.controller.toggleClass(t,s,!1)})}save(){let t=this.currentTabs.map(t=>this.controller.getPaneID(t));this.constructor.save(this.key,t)}static load(t){if(!t)return;let e=sessionStorage.getItem(t);try{return JSON.parse(e)}catch(t){return null}}static save(t,e){t&&sessionStorage.setItem(t,JSON.stringify(e))}}class s extends t{get tabs(){return this.context.bindingObserver.bindings.filter(t=>"show"==t.action.methodName).map(t=>t.action.element.parentNode)}get currentTabs(){return this.tabs.filter(t=>t.matches(".st-tabs__tab--current"))}connect(){this.store=new e(this),this.store.load()}show(t){t.target.matches("a[href]")&&(this.currentTabs.forEach(t=>this.close(t)),this.open(t.target.parentNode),t.preventDefault())}open(t){let e=this.findPane(t);this.toggleClass(t,e,!0),this.dispatch("opened",{detail:{tab:t,pane:e}}),this.store.save()}close(t){let e=this.findPane(t);this.toggleClass(t,e,!1),this.dispatch("closed",{detail:{tab:t,pane:e}}),this.store.save()}toggleClass(t,e,s){s?(t.classList.add("st-tabs__tab--current"),e.classList.add("st-tabs__pane--visible")):(t.classList.remove("st-tabs__tab--current"),e.classList.remove("st-tabs__pane--visible"))}findPane(t){let e=this.getPaneID(t);return this.scope.findElement(`[data-tabs-pane-id="${e}"]`)}getPaneID(t){return t.querySelector("a[href]").getAttribute("href").replace(/^#/,"")}}s.values={storeKey:String};export{s as default};
//# sourceMappingURL=index.modern.js.map
