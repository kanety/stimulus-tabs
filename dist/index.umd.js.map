{"version":3,"file":"index.umd.js","sources":["../src/store.js","../src/index.js"],"sourcesContent":["export default class Store {\n  constructor(controller) {\n    this.controller = controller;\n  }\n\n  get tabs() {\n    return this.controller.tabs;\n  }\n\n  get currentTabs() {\n    return this.controller.currentTabs;\n  }\n\n  get key() {\n    return this.controller.storeKeyValue;\n  }\n\n  load() {\n    let ids = this.constructor.load(this.key);\n    if (!ids) return;\n\n    let idSet = new Set(ids);\n    this.tabs.forEach(tab => {\n      if (idSet.has(this.controller.getTabID(tab))) {\n        this.controller.open(tab)\n      } else {\n        this.controller.close(tab);\n      }\n    });\n  }\n\n  save() {\n    let ids = this.currentTabs.map(tab => this.controller.getTabID(tab));\n    this.constructor.save(this.key, ids);\n  }\n\n  static load(key) {\n    if (!key) return;\n    let json = sessionStorage.getItem(key);\n    try {\n      return JSON.parse(json)\n    } catch {\n      return null;\n    }\n  }\n\n  static save(key, value) {\n    if (!key) return;\n    sessionStorage.setItem(key, JSON.stringify(value));\n  }\n}\n","import { Controller } from '@hotwired/stimulus';\nimport '@kanety/stimulus-static-actions';\nimport Store from './store';\nimport './index.scss';\n\nexport default class extends Controller {\n  static targets = ['tabs'];\n  static values = {\n    storeKey: String\n  };\n  static actions = [\n    ['tabs', 'click->show']\n  ];\n\n  get tabs() {\n    return Array.from(this.tabsTarget.children);\n  }\n\n  get currentTabs() {\n    return this.tabs.filter(tab => tab.matches('.st-tabs__tab--current'));\n  }\n\n  connect() {\n    this.store = new Store(this);\n    this.store.load();\n  }\n\n  show(e) {\n    if (!e.target.matches('a[href]')) return;\n\n    this.currentTabs.forEach(tab => this.close(tab));\n    this.open(e.target.parentNode);\n\n    e.preventDefault();\n  }\n\n  open(tab) {\n    let pane = this.findPane(tab);\n    this.toggleClass(tab, pane, true);\n    this.dispatch('opened', { detail: { tab: tab, pane: pane } });\n    this.store.save();\n  }\n\n  close(tab) {\n    let pane = this.findPane(tab);\n    this.toggleClass(tab, pane, false);\n    this.dispatch('closed', { detail: { tab: tab, pane: pane } });\n    this.store.save();\n  }\n\n  toggleClass(tab, pane, flag) {\n    tab.classList.toggle('st-tabs__tab--current', flag);\n    pane.style.display = flag ? '' : 'none';\n    pane.classList.toggle('st-tabs__pane--visible', flag);\n  }\n\n  findPane(tab) {\n    let id = this.getTabID(tab);\n    return this.element.querySelector(`[data-pane-id=\"${id}\"]`);\n  }\n\n  getTabID(tab) {\n    return tab.querySelector('a[href]').getAttribute('href').replace(/^#/, '');\n  }\n}\n"],"names":["Store","constructor","controller","this","tabs","currentTabs","key","storeKeyValue","load","ids","idSet","Set","forEach","tab","has","getTabID","open","close","save","map","static","json","sessionStorage","getItem","JSON","parse","value","setItem","stringify","Controller","Array","from","tabsTarget","children","filter","matches","connect","store","show","e","target","parentNode","preventDefault","pane","findPane","toggleClass","dispatch","detail","flag","classList","toggle","style","display","id","element","querySelector","getAttribute","replace","targets","values","storeKey","String","actions"],"mappings":"iXAAqBA,EACnBC,YAAYC,GACVC,KAAKD,WAAaA,EAGhBE,WACF,YAAYF,WAAWE,KAGrBC,kBACF,YAAYH,WAAWG,YAGrBC,UACF,YAAYJ,WAAWK,cAGzBC,OACE,IAAIC,EAAMN,KAAKF,YAAYO,KAAKL,KAAKG,KACrC,GAAKG,EAAL,CAEA,IAAIC,EAAQ,IAAIC,IAAIF,GACpBN,KAAKC,KAAKQ,QAAQC,IACZH,EAAMI,IAAIX,KAAKD,WAAWa,SAASF,IACrCV,KAAKD,WAAWc,KAAKH,GAErBV,KAAKD,WAAWe,MAAMJ,MAK5BK,OACE,IAAIT,EAAMN,KAAKE,YAAYc,IAAIN,GAAOV,KAAKD,WAAWa,SAASF,IAC/DV,KAAKF,YAAYiB,KAAKf,KAAKG,IAAKG,GAGvBW,YAACd,GACV,GAAKA,EAAL,CACA,IAAIe,EAAOC,eAAeC,QAAQjB,GAClC,IACE,OAAOkB,KAAKC,MAAMJ,GAClB,SACA,cAIOD,YAACd,EAAKoB,GACVpB,GACLgB,eAAeK,QAAQrB,EAAKkB,KAAKI,UAAUF,qBC3ClBG,aASvBzB,WACF,OAAO0B,MAAMC,KAAK5B,KAAK6B,WAAWC,UAGhC5B,kBACF,YAAYD,KAAK8B,OAAOrB,GAAOA,EAAIsB,QAAQ,2BAG7CC,UACEjC,KAAKkC,MAAQ,IAAIrC,EAAMG,MACvBA,KAAKkC,MAAM7B,OAGb8B,KAAKC,GACEA,EAAEC,OAAOL,QAAQ,aAEtBhC,KAAKE,YAAYO,QAAQC,GAAOV,KAAKc,MAAMJ,IAC3CV,KAAKa,KAAKuB,EAAEC,OAAOC,YAEnBF,EAAEG,kBAGJ1B,KAAKH,GACH,IAAI8B,EAAOxC,KAAKyC,SAAS/B,GACzBV,KAAK0C,YAAYhC,EAAK8B,GAAM,GAC5BxC,KAAK2C,SAAS,SAAU,CAAEC,OAAQ,CAAElC,IAAKA,EAAK8B,KAAMA,KACpDxC,KAAKkC,MAAMnB,OAGbD,MAAMJ,GACJ,IAAI8B,EAAOxC,KAAKyC,SAAS/B,GACzBV,KAAK0C,YAAYhC,EAAK8B,GAAM,GAC5BxC,KAAK2C,SAAS,SAAU,CAAEC,OAAQ,CAAElC,IAAKA,EAAK8B,KAAMA,KACpDxC,KAAKkC,MAAMnB,OAGb2B,YAAYhC,EAAK8B,EAAMK,GACrBnC,EAAIoC,UAAUC,OAAO,wBAAyBF,GAC9CL,EAAKQ,MAAMC,QAAUJ,EAAO,GAAK,OACjCL,EAAKM,UAAUC,OAAO,yBAA0BF,GAGlDJ,SAAS/B,GACP,IAAIwC,EAAKlD,KAAKY,SAASF,GACvB,YAAYyC,QAAQC,gCAAgCF,QAGtDtC,SAASF,GACP,OAAOA,EAAI0C,cAAc,WAAWC,aAAa,QAAQC,QAAQ,KAAM,cAxDlEC,QAAU,CAAC,UACXC,OAAS,CACdC,SAAUC,UAELC,QAAU,CACf,CAAC,OAAQ"}